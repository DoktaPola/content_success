<?xml version="1.0" encoding="utf-8"?><text id="2564" parent="604" name="103083 Асинхронная обработка задач: MS SQL"><tags><tag>url:http://yakov-sirotkin.livejournal.com/103083.html</tag></tags><paragraphs><paragraph id="22283"><sentence id="66206"><source>Асинхронная обработка задач: MS SQL</source><tokens><token id="1205519" text="Асинхронная"><tfr rev_id="2832289" t="Асинхронная"><v><l id="18354" t="асинхронный"><g v="ADJF"></g><g v="femn"></g><g v="sing"></g><g v="nomn"></g></l></v></tfr></token><token id="1205520" text="обработка"><tfr rev_id="2832290" t="обработка"><v><l id="198758" t="обработка"><g v="NOUN"></g><g v="inan"></g><g v="femn"></g><g v="sing"></g><g v="nomn"></g></l></v></tfr></token><token id="1205521" text="задач"><tfr rev_id="2832291" t="задач"><v><l id="101455" t="задача"><g v="NOUN"></g><g v="inan"></g><g v="femn"></g><g v="plur"></g><g v="gent"></g></l></v></tfr></token><token id="1205522" text=":"><tfr rev_id="2832292" t=":"><v><l id="0" t=":"><g v="PNCT"></g></l></v></tfr></token><token id="1205523" text="MS"><tfr rev_id="2832293" t="MS"><v><l id="0" t="MS"><g v="LATN"></g></l></v></tfr></token><token id="1205524" text="SQL"><tfr rev_id="2832294" t="SQL"><v><l id="0" t="SQL"><g v="LATN"></g></l></v></tfr></token></tokens></sentence></paragraph><paragraph id="22284"><sentence id="66207"><source>В моём докладе про асинхронную обработку задач есть маленький не совсем тривиальный технический вопрос: как брать из очереди задачи так, чтобы каждая выполнилась только один раз и чтобы обработка шла в много потоков.</source><tokens><token id="1205525" text="В"><tfr rev_id="2832295" t="В"><v><l id="37409" t="в"><g v="PREP"></g></l></v></tfr></token><token id="1205526" text="моём"><tfr rev_id="3702917" t="моём"><v><l id="162570" t="мой"><g v="ADJF"></g><g v="Apro"></g><g v="masc"></g><g v="sing"></g><g v="loct"></g></l></v></tfr></token><token id="1205527" text="докладе"><tfr rev_id="2832297" t="докладе"><v><l id="87236" t="доклад"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="loct"></g></l></v></tfr></token><token id="1205528" text="про"><tfr rev_id="2832298" t="про"><v><l id="277024" t="про"><g v="PREP"></g></l></v></tfr></token><token id="1205529" text="асинхронную"><tfr rev_id="2832299" t="асинхронную"><v><l id="18354" t="асинхронный"><g v="ADJF"></g><g v="femn"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205530" text="обработку"><tfr rev_id="2832300" t="обработку"><v><l id="198758" t="обработка"><g v="NOUN"></g><g v="inan"></g><g v="femn"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205531" text="задач"><tfr rev_id="2832301" t="задач"><v><l id="101455" t="задача"><g v="NOUN"></g><g v="inan"></g><g v="femn"></g><g v="plur"></g><g v="gent"></g></l></v></tfr></token><token id="1205532" text="есть"><tfr rev_id="4372081" t="есть"><v><l id="37265" t="есть"><g v="VERB"></g><g v="impf"></g><g v="intr"></g><g v="sing"></g><g v="3per"></g><g v="pres"></g><g v="indc"></g></l></v><v><l id="37265" t="есть"><g v="VERB"></g><g v="impf"></g><g v="intr"></g><g v="plur"></g><g v="3per"></g><g v="pres"></g><g v="indc"></g></l></v></tfr></token><token id="1205533" text="маленький"><tfr rev_id="2832303" t="маленький"><v><l id="153694" t="маленький"><g v="ADJF"></g><g v="Qual"></g><g v="masc"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="153694" t="маленький"><g v="ADJF"></g><g v="Qual"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205534" text="не"><tfr rev_id="2832304" t="не"><v><l id="178876" t="не"><g v="PRCL"></g></l></v></tfr></token><token id="1205535" text="совсем"><tfr rev_id="2832305" t="совсем"><v><l id="328223" t="совсем"><g v="ADVB"></g></l></v></tfr></token><token id="1205536" text="тривиальный"><tfr rev_id="2832306" t="тривиальный"><v><l id="350018" t="тривиальный"><g v="ADJF"></g><g v="Qual"></g><g v="masc"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="350018" t="тривиальный"><g v="ADJF"></g><g v="Qual"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205537" text="технический"><tfr rev_id="2832307" t="технический"><v><l id="345946" t="технический"><g v="ADJF"></g><g v="masc"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="345946" t="технический"><g v="ADJF"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205538" text="вопрос"><tfr rev_id="2832308" t="вопрос"><v><l id="50830" t="вопрос"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="50830" t="вопрос"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205539" text=":"><tfr rev_id="2832309" t=":"><v><l id="0" t=":"><g v="PNCT"></g></l></v></tfr></token><token id="1205540" text="как"><tfr rev_id="2832310" t="как"><v><l id="128190" t="как"><g v="CONJ"></g></l></v><v><l id="128191" t="как"><g v="PRCL"></g></l></v><v><l id="128192" t="как"><g v="ADVB"></g><g v="Ques"></g></l></v></tfr></token><token id="1205541" text="брать"><tfr rev_id="2832311" t="брать"><v><l id="33653" t="брать"><g v="INFN"></g><g v="impf"></g><g v="tran"></g></l></v></tfr></token><token id="1205542" text="из"><tfr rev_id="3329136" t="из"><v><l id="117677" t="из"><g v="PREP"></g></l></v></tfr></token><token id="1205543" text="очереди"><tfr rev_id="4343746" t="очереди"><v><l id="221692" t="очередь"><g v="NOUN"></g><g v="inan"></g><g v="femn"></g><g v="sing"></g><g v="gent"></g></l></v></tfr></token><token id="1205544" text="задачи"><tfr rev_id="3819880" t="задачи"><v><l id="101455" t="задача"><g v="NOUN"></g><g v="inan"></g><g v="femn"></g><g v="plur"></g><g v="accs"></g></l></v></tfr></token><token id="1205545" text="так"><tfr rev_id="2832315" t="так"><v><l id="342451" t="так"><g v="CONJ"></g></l></v><v><l id="342452" t="так"><g v="PRCL"></g></l></v><v><l id="342453" t="так"><g v="ADVB"></g><g v="Dmns"></g></l></v></tfr></token><token id="1205546" text=","><tfr rev_id="2832316" t=","><v><l id="0" t=","><g v="PNCT"></g></l></v></tfr></token><token id="1205547" text="чтобы"><tfr rev_id="2832317" t="чтобы"><v><l id="377013" t="чтобы"><g v="CONJ"></g></l></v><v><l id="377014" t="чтобы"><g v="PRCL"></g></l></v></tfr></token><token id="1205548" text="каждая"><tfr rev_id="4430368" t="каждая"><v><l id="127875" t="каждый"><g v="ADJF"></g><g v="Subx"></g><g v="Apro"></g><g v="femn"></g><g v="sing"></g><g v="nomn"></g></l></v></tfr></token><token id="1205549" text="выполнилась"><tfr rev_id="2832319" t="выполнилась"><v><l id="60631" t="выполнился"><g v="VERB"></g><g v="perf"></g><g v="intr"></g><g v="femn"></g><g v="sing"></g><g v="past"></g><g v="indc"></g></l></v></tfr></token><token id="1205550" text="только"><tfr rev_id="3784957" t="только"><v><l id="347395" t="только"><g v="CONJ"></g></l></v><v><l id="347396" t="только"><g v="PRCL"></g></l></v><v><l id="390053" t="только"><g v="ADVB"></g></l></v></tfr></token><token id="1205551" text="один"><tfr rev_id="4300040" t="один"><v><l id="203319" t="один"><g v="ADJF"></g><g v="Apro"></g><g v="Anum"></g><g v="masc"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="203319" t="один"><g v="ADJF"></g><g v="Apro"></g><g v="Anum"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205552" text="раз"><tfr rev_id="4510555" t="раз"><v><l id="291500" t="раз"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="291500" t="раз"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205553" text="и"><tfr rev_id="2832323" t="и"><v><l id="116949" t="и"><g v="CONJ"></g></l></v><v><l id="116950" t="и"><g v="INTJ"></g></l></v></tfr></token><token id="1205554" text="чтобы"><tfr rev_id="2832324" t="чтобы"><v><l id="377013" t="чтобы"><g v="CONJ"></g></l></v><v><l id="377014" t="чтобы"><g v="PRCL"></g></l></v></tfr></token><token id="1205555" text="обработка"><tfr rev_id="2832325" t="обработка"><v><l id="198758" t="обработка"><g v="NOUN"></g><g v="inan"></g><g v="femn"></g><g v="sing"></g><g v="nomn"></g></l></v></tfr></token><token id="1205556" text="шла"><tfr rev_id="2832326" t="шла"><v><l id="117566" t="иду"><g v="VERB"></g><g v="impf"></g><g v="intr"></g><g v="femn"></g><g v="sing"></g><g v="past"></g><g v="indc"></g></l></v></tfr></token><token id="1205557" text="в"><tfr rev_id="2832327" t="в"><v><l id="37409" t="в"><g v="PREP"></g></l></v></tfr></token><token id="1205558" text="много"><tfr rev_id="4176616" t="много"><v><l id="389079" t="много"><g v="NUMR"></g><g v="nomn"></g></l></v><v><l id="389079" t="много"><g v="NUMR"></g><g v="accs"></g></l></v></tfr></token><token id="1205559" text="потоков"><tfr rev_id="3715925" t="потоков"><v><l id="263275" t="поток"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="plur"></g><g v="gent"></g></l></v></tfr></token><token id="1205560" text="."><tfr rev_id="2832330" t="."><v><l id="0" t="."><g v="PNCT"></g></l></v></tfr></token></tokens></sentence><sentence id="66208"><source>Я в последнее время работаю с Oracle, поэтому слайд с кусочком кода у меня был только для него, но теперь есть решение и для MS SQL:</source><tokens><token id="1205561" text="Я"><tfr rev_id="2832331" t="Я"><v><l id="387317" t="я"><g v="NPRO"></g><g v="1per"></g><g v="sing"></g><g v="nomn"></g></l></v></tfr></token><token id="1205562" text="в"><tfr rev_id="2832332" t="в"><v><l id="37409" t="в"><g v="PREP"></g></l></v></tfr></token><token id="1205563" text="последнее"><tfr rev_id="3809355" t="последнее"><v><l id="261565" t="последний"><g v="ADJF"></g><g v="neut"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="261565" t="последний"><g v="ADJF"></g><g v="neut"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205564" text="время"><tfr rev_id="4164783" t="время"><v><l id="53149" t="время"><g v="NOUN"></g><g v="inan"></g><g v="neut"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205565" text="работаю"><tfr rev_id="2832335" t="работаю"><v><l id="290502" t="работаю"><g v="VERB"></g><g v="impf"></g><g v="intr"></g><g v="sing"></g><g v="1per"></g><g v="pres"></g><g v="indc"></g></l></v></tfr></token><token id="1205566" text="с"><tfr rev_id="2832336" t="с"><v><l id="311151" t="с"><g v="PREP"></g></l></v></tfr></token><token id="1205567" text="Oracle"><tfr rev_id="2832337" t="Oracle"><v><l id="0" t="Oracle"><g v="LATN"></g></l></v></tfr></token><token id="1205568" text=","><tfr rev_id="2832338" t=","><v><l id="0" t=","><g v="PNCT"></g></l></v></tfr></token><token id="1205569" text="поэтому"><tfr rev_id="2832339" t="поэтому"><v><l id="265490" t="поэтому"><g v="ADVB"></g></l></v></tfr></token><token id="1205570" text="слайд"><tfr rev_id="2832340" t="слайд"><v><l id="324637" t="слайд"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="324637" t="слайд"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205571" text="с"><tfr rev_id="2832341" t="с"><v><l id="311151" t="с"><g v="PREP"></g></l></v></tfr></token><token id="1205572" text="кусочком"><tfr rev_id="2832342" t="кусочком"><v><l id="145670" t="кусочек"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="ablt"></g></l></v></tfr></token><token id="1205573" text="кода"><tfr rev_id="4496726" t="кода"><v><l id="135279" t="код"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="gent"></g></l></v></tfr></token><token id="1205574" text="у"><tfr rev_id="3333373" t="у"><v><l id="352818" t="у"><g v="PREP"></g></l></v></tfr></token><token id="1205575" text="меня"><tfr rev_id="4350985" t="меня"><v><l id="387317" t="я"><g v="NPRO"></g><g v="1per"></g><g v="sing"></g><g v="gent"></g></l></v></tfr></token><token id="1205576" text="был"><tfr rev_id="2832346" t="был"><v><l id="37265" t="есть"><g v="VERB"></g><g v="impf"></g><g v="intr"></g><g v="masc"></g><g v="sing"></g><g v="past"></g><g v="indc"></g></l></v></tfr></token><token id="1205577" text="только"><tfr rev_id="3784958" t="только"><v><l id="347395" t="только"><g v="CONJ"></g></l></v><v><l id="347396" t="только"><g v="PRCL"></g></l></v><v><l id="390053" t="только"><g v="ADVB"></g></l></v></tfr></token><token id="1205578" text="для"><tfr rev_id="3463299" t="для"><v><l id="85032" t="для"><g v="PREP"></g></l></v></tfr></token><token id="1205579" text="него"><tfr rev_id="4530084" t="него"><v><l id="206541" t="он"><g v="NPRO"></g><g v="masc"></g><g v="3per"></g><g v="Anph"></g><g v="sing"></g><g v="gent"></g><g v="Af-p"></g></l></v><v><l id="206649" t="оно"><g v="NPRO"></g><g v="neut"></g><g v="3per"></g><g v="Anph"></g><g v="sing"></g><g v="gent"></g><g v="Af-p"></g></l></v></tfr></token><token id="1205580" text=","><tfr rev_id="2832350" t=","><v><l id="0" t=","><g v="PNCT"></g></l></v></tfr></token><token id="1205581" text="но"><tfr rev_id="2832351" t="но"><v><l id="191429" t="но"><g v="CONJ"></g></l></v><v><l id="191430" t="но"><g v="INTJ"></g></l></v></tfr></token><token id="1205582" text="теперь"><tfr rev_id="2832352" t="теперь"><v><l id="344864" t="теперь"><g v="ADVB"></g></l></v></tfr></token><token id="1205583" text="есть"><tfr rev_id="4393413" t="есть"><v><l id="37265" t="есть"><g v="VERB"></g><g v="impf"></g><g v="intr"></g><g v="sing"></g><g v="3per"></g><g v="pres"></g><g v="indc"></g></l></v><v><l id="37265" t="есть"><g v="VERB"></g><g v="impf"></g><g v="intr"></g><g v="plur"></g><g v="3per"></g><g v="pres"></g><g v="indc"></g></l></v></tfr></token><token id="1205584" text="решение"><tfr rev_id="4104466" t="решение"><v><l id="307350" t="решение"><g v="NOUN"></g><g v="inan"></g><g v="neut"></g><g v="sing"></g><g v="nomn"></g></l></v></tfr></token><token id="1205585" text="и"><tfr rev_id="2832355" t="и"><v><l id="116949" t="и"><g v="CONJ"></g></l></v><v><l id="116950" t="и"><g v="INTJ"></g></l></v></tfr></token><token id="1205586" text="для"><tfr rev_id="3463212" t="для"><v><l id="85032" t="для"><g v="PREP"></g></l></v></tfr></token><token id="1205587" text="MS"><tfr rev_id="2832357" t="MS"><v><l id="0" t="MS"><g v="LATN"></g></l></v></tfr></token><token id="1205588" text="SQL"><tfr rev_id="2832358" t="SQL"><v><l id="0" t="SQL"><g v="LATN"></g></l></v></tfr></token><token id="1205589" text=":"><tfr rev_id="2832359" t=":"><v><l id="0" t=":"><g v="PNCT"></g></l></v></tfr></token></tokens></sentence></paragraph><paragraph id="22285"><sentence id="66209"><source>Прошу прощения, возникли споры по поводу моего права публиковать это решение.</source><tokens><token id="1205590" text="Прошу"><tfr rev_id="2832360" t="Прошу"><v><l id="284318" t="прошу"><g v="VERB"></g><g v="impf"></g><g v="tran"></g><g v="sing"></g><g v="1per"></g><g v="pres"></g><g v="indc"></g></l></v></tfr></token><token id="1205591" text="прощения"><tfr rev_id="3709538" t="прощения"><v><l id="287900" t="прощение"><g v="NOUN"></g><g v="inan"></g><g v="neut"></g><g v="sing"></g><g v="gent"></g></l></v></tfr></token><token id="1205592" text=","><tfr rev_id="2832362" t=","><v><l id="0" t=","><g v="PNCT"></g></l></v></tfr></token><token id="1205593" text="возникли"><tfr rev_id="2832363" t="возникли"><v><l id="49521" t="возник"><g v="VERB"></g><g v="perf"></g><g v="intr"></g><g v="plur"></g><g v="past"></g><g v="indc"></g></l></v></tfr></token><token id="1205594" text="споры"><tfr rev_id="4227541" t="споры"><v><l id="332735" t="спор"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="plur"></g><g v="nomn"></g></l></v><v><l id="332735" t="спор"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="plur"></g><g v="accs"></g></l></v><v><l id="332736" t="спора"><g v="NOUN"></g><g v="inan"></g><g v="femn"></g><g v="plur"></g><g v="nomn"></g></l></v><v><l id="332736" t="спора"><g v="NOUN"></g><g v="inan"></g><g v="femn"></g><g v="plur"></g><g v="accs"></g></l></v></tfr></token><token id="1205595" text="по"><tfr rev_id="2832365" t="по"><v><l id="241240" t="по"><g v="PREP"></g></l></v></tfr></token><token id="1205596" text="поводу"><tfr rev_id="3812076" t="поводу"><v><l id="242551" t="повод"><g v="NOUN"></g><g v="inan"></g><g v="masc"></g><g v="sing"></g><g v="datv"></g></l></v></tfr></token><token id="1205597" text="моего"><tfr rev_id="4102259" t="моего"><v><l id="162570" t="мой"><g v="ADJF"></g><g v="Apro"></g><g v="neut"></g><g v="sing"></g><g v="gent"></g></l></v></tfr></token><token id="1205598" text="права"><tfr rev_id="4203842" t="права"><v><l id="265680" t="право"><g v="NOUN"></g><g v="inan"></g><g v="neut"></g><g v="sing"></g><g v="gent"></g></l></v></tfr></token><token id="1205599" text="публиковать"><tfr rev_id="2832369" t="публиковать"><v><l id="288831" t="публиковать"><g v="INFN"></g><g v="impf"></g><g v="tran"></g></l></v></tfr></token><token id="1205600" text="это"><tfr rev_id="4443260" t="это"><v><l id="386574" t="это"><g v="PRCL"></g></l></v><v><l id="386575" t="это"><g v="NPRO"></g><g v="neut"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="386575" t="это"><g v="NPRO"></g><g v="neut"></g><g v="sing"></g><g v="accs"></g></l></v><v><l id="386581" t="этот"><g v="ADJF"></g><g v="Subx"></g><g v="Apro"></g><g v="Anph"></g><g v="neut"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="386581" t="этот"><g v="ADJF"></g><g v="Subx"></g><g v="Apro"></g><g v="Anph"></g><g v="neut"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205601" text="решение"><tfr rev_id="2832371" t="решение"><v><l id="307350" t="решение"><g v="NOUN"></g><g v="inan"></g><g v="neut"></g><g v="sing"></g><g v="nomn"></g></l></v><v><l id="307350" t="решение"><g v="NOUN"></g><g v="inan"></g><g v="neut"></g><g v="sing"></g><g v="accs"></g></l></v></tfr></token><token id="1205602" text="."><tfr rev_id="2832372" t="."><v><l id="0" t="."><g v="PNCT"></g></l></v></tfr></token></tokens></sentence></paragraph></paragraphs></text>